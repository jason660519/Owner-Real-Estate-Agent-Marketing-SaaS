# Docker Compose éƒ¨ç½²å‰æª¢æŸ¥æ¸…å–®

## âœ… å·²å®Œæˆé …ç›®

1. **Docker ç’°å¢ƒ**
   - âœ… Docker å·²å®‰è£ (v29.1.3)
   - âœ… Docker Compose å·²å®‰è£ (v2.40.3)
   - âœ… docker-compose.yml å·²é…ç½®

2. **åŸºç¤è¨­æ–½é…ç½®**
   - âœ… PostgreSQL é…ç½®å®Œæˆ
   - âœ… MinIO é…ç½®å®Œæˆ
   - âœ… ç¶²è·¯é…ç½®å®Œæˆ

## âš ï¸ éœ€è¦æº–å‚™çš„é …ç›®

### éšæ®µä¸€ï¼šåŸºç¤è¨­æ–½éƒ¨ç½²ï¼ˆå¯ä»¥å…ˆéƒ¨ç½²ï¼‰âœ…

é€™äº›æœå‹™ä¸éœ€è¦æ‡‰ç”¨ä»£ç¢¼ï¼Œå¯ä»¥ç›´æ¥éƒ¨ç½²ï¼š

1. **PostgreSQL** âœ… å¯ä»¥ç›´æ¥éƒ¨ç½²
   - ä½¿ç”¨å®˜æ–¹é¡åƒï¼Œç„¡éœ€é¡å¤–é…ç½®
   - å‘½ä»¤ï¼š`docker-compose up -d db`

2. **MinIO** âœ… å¯ä»¥ç›´æ¥éƒ¨ç½²
   - ä½¿ç”¨å®˜æ–¹é¡åƒï¼Œç„¡éœ€é¡å¤–é…ç½®
   - å‘½ä»¤ï¼š`docker-compose up -d minio`

### éšæ®µäºŒï¼šæ‡‰ç”¨æœå‹™éƒ¨ç½²ï¼ˆéœ€è¦æº–å‚™ä»£ç¢¼ï¼‰âš ï¸

é€™äº›æœå‹™éœ€è¦å…ˆå»ºç«‹ä»£ç¢¼å’Œé…ç½®æ–‡ä»¶ï¼š

#### 1. Rasa æœå‹™ âš ï¸

**éœ€è¦å»ºç«‹ï¼š**
```
rasa/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ config.yml
â”œâ”€â”€ domain.yml
â”œâ”€â”€ endpoints.yml
â”œâ”€â”€ credentials.yml
â””â”€â”€ data/
    â”œâ”€â”€ nlu.yml
    â”œâ”€â”€ stories.yml
    â””â”€â”€ rules.yml
```

**æœ€å°é…ç½®ç¯„ä¾‹ï¼š**
- `rasa/Dockerfile` - Rasa å®¹å™¨é…ç½®
- `rasa/endpoints.yml` - è³‡æ–™åº«é€£æ¥é…ç½®
- `rasa/credentials.yml` - API é…ç½®

#### 2. Backend (Node.js) æœå‹™ âš ï¸

**éœ€è¦å»ºç«‹ï¼š**
```
backend/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ package.json
â”œâ”€â”€ server.js (æˆ– index.js)
â””â”€â”€ .env.example
```

**æœ€å°é…ç½®ç¯„ä¾‹ï¼š**
- `backend/Dockerfile` - Node.js å®¹å™¨é…ç½®
- `backend/package.json` - ä¾è³´ç®¡ç†
- `backend/server.js` - Express æœå‹™å™¨å…¥å£

#### 3. Frontend (Expo/Next.js) æœå‹™ âš ï¸

**éœ€è¦å»ºç«‹ï¼š**
```
frontend/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ package.json
â””â”€â”€ (Expo æˆ– Next.js å°ˆæ¡ˆçµæ§‹)
```

**æœ€å°é…ç½®ç¯„ä¾‹ï¼š**
- `frontend/Dockerfile` - å‰ç«¯å®¹å™¨é…ç½®
- `frontend/package.json` - ä¾è³´ç®¡ç†

## éƒ¨ç½²ç­–ç•¥å»ºè­°

### æ–¹æ¡ˆä¸€ï¼šåˆ†éšæ®µéƒ¨ç½²ï¼ˆæ¨è–¦ï¼‰âœ…

**éšæ®µ 1ï¼šå…ˆéƒ¨ç½²åŸºç¤è¨­æ–½**
```bash
# åªå•Ÿå‹•è³‡æ–™åº«å’Œç‰©ä»¶å„²å­˜
docker-compose up -d db minio

# é©—è­‰æœå‹™
docker-compose ps
docker-compose logs db
docker-compose logs minio
```

**éšæ®µ 2ï¼šæº–å‚™æ‡‰ç”¨ä»£ç¢¼å¾Œå†éƒ¨ç½²**
```bash
# å»ºç«‹å¿…è¦çš„ç›®éŒ„å’Œé…ç½®æ–‡ä»¶
# ç„¶å¾Œå•Ÿå‹•æ‰€æœ‰æœå‹™
docker-compose up -d
```

### æ–¹æ¡ˆäºŒï¼šæš«æ™‚è¨»è§£æ‡‰ç”¨æœå‹™ï¼ˆæ¨è–¦ï¼‰âœ…

**ä¿®æ”¹ docker-compose.ymlï¼š**
- æš«æ™‚è¨»è§£ `rasa`ã€`backend`ã€`frontend` æœå‹™
- å…ˆéƒ¨ç½² `db` å’Œ `minio`
- æº–å‚™å¥½ä»£ç¢¼å¾Œå†å•Ÿç”¨æ‡‰ç”¨æœå‹™

### æ–¹æ¡ˆä¸‰ï¼šå»ºç«‹æœ€å°å¯é‹è¡Œç‰ˆæœ¬ï¼ˆå¿«é€Ÿé©—è­‰ï¼‰âœ…

å»ºç«‹æœ€åŸºæœ¬çš„é…ç½®æ–‡ä»¶ï¼Œè®“æœå‹™å¯ä»¥å•Ÿå‹•ï¼ˆå³ä½¿åŠŸèƒ½ä¸å®Œæ•´ï¼‰ï¼Œç”¨æ–¼é©—è­‰æ¶æ§‹ã€‚

## ç«‹å³å¯ä»¥åŸ·è¡Œçš„æ­¥é©Ÿ

### 1. éƒ¨ç½²åŸºç¤è¨­æ–½ï¼ˆç¾åœ¨å°±å¯ä»¥åšï¼‰âœ…

```bash
# é€²å…¥å°ˆæ¡ˆç›®éŒ„
cd "/Users/jason66/Desktop/Owner Real Estate Agent SaaS"

# åªå•Ÿå‹•è³‡æ–™åº«å’Œç‰©ä»¶å„²å­˜
docker-compose up -d db minio

# æª¢æŸ¥æœå‹™ç‹€æ…‹
docker-compose ps

# æŸ¥çœ‹æ—¥èªŒ
docker-compose logs -f db
docker-compose logs -f minio
```

### 2. é©—è­‰æœå‹™

**PostgreSQLï¼š**
```bash
# æ¸¬è©¦é€£æ¥
docker-compose exec db psql -U postgres -d ownersaas -c "SELECT version();"
```

**MinIOï¼š**
```bash
# è¨ªå•ç®¡ç†ä»‹é¢
# ç€è¦½å™¨æ‰“é–‹ï¼šhttp://localhost:9001
# å¸³è™Ÿï¼šminioadmin
# å¯†ç¢¼ï¼šminioadmin
```

### 3. æº–å‚™æ‡‰ç”¨ä»£ç¢¼ï¼ˆä¸‹ä¸€æ­¥ï¼‰

å»ºç«‹å¿…è¦çš„ç›®éŒ„å’Œé…ç½®æ–‡ä»¶å¾Œï¼Œå†å•Ÿå‹•æ‡‰ç”¨æœå‹™ã€‚

## å»ºè­°çš„åŸ·è¡Œé †åº

### ç¾åœ¨ï¼ˆç«‹å³åŸ·è¡Œï¼‰âœ…
1. éƒ¨ç½²åŸºç¤è¨­æ–½ï¼ˆPostgreSQL + MinIOï¼‰
2. é©—è­‰åŸºç¤è¨­æ–½æ­£å¸¸é‹è¡Œ
3. æ¸¬è©¦è³‡æ–™åº«é€£æ¥

### æ¥ä¸‹ä¾†ï¼ˆæº–å‚™ä»£ç¢¼ï¼‰âš ï¸
1. å»ºç«‹ Rasa åŸºæœ¬é…ç½®
2. å»ºç«‹ Node.js Backend åŸºæœ¬çµæ§‹
3. å»ºç«‹ Frontend åŸºæœ¬çµæ§‹
4. éƒ¨ç½²æ‡‰ç”¨æœå‹™

### æœªä¾†ï¼ˆå„ªåŒ–ï¼‰ğŸ“‹
1. é…ç½® Redisï¼ˆå¦‚éœ€è¦ï¼‰
2. é…ç½® ClickHouseï¼ˆå¦‚éœ€è¦ï¼‰
3. é…ç½® Cloudflare Tunnelï¼ˆå¦‚éœ€è¦ï¼‰

## å¿«é€Ÿæª¢æŸ¥å‘½ä»¤

```bash
# æª¢æŸ¥ Docker ç‹€æ…‹
docker ps
docker-compose ps

# æª¢æŸ¥æœå‹™å¥åº·ç‹€æ…‹
docker-compose exec db pg_isready -U postgres
curl http://localhost:9000/minio/health/live

# æŸ¥çœ‹æ‰€æœ‰æœå‹™æ—¥èªŒ
docker-compose logs

# åœæ­¢æ‰€æœ‰æœå‹™
docker-compose down

# åœæ­¢ä¸¦åˆªé™¤ volumesï¼ˆâš ï¸ æœƒåˆªé™¤è³‡æ–™ï¼‰
docker-compose down -v
```

## å¸¸è¦‹å•é¡Œ

### Q: å¯ä»¥ç›´æ¥ `docker-compose up` å—ï¼Ÿ
A: ä¸å»ºè­°ï¼Œå› ç‚º `rasa`ã€`backend`ã€`frontend` æœå‹™éœ€è¦ä»£ç¢¼å’Œé…ç½®æ–‡ä»¶ï¼Œæœƒå°è‡´å•Ÿå‹•å¤±æ•—ã€‚

### Q: å¯ä»¥å…ˆéƒ¨ç½²éƒ¨åˆ†æœå‹™å—ï¼Ÿ
A: å¯ä»¥ï¼ä½¿ç”¨ `docker-compose up -d db minio` åªå•Ÿå‹•åŸºç¤è¨­æ–½ã€‚

### Q: å¦‚ä½•çŸ¥é“æœå‹™æ˜¯å¦æ­£å¸¸ï¼Ÿ
A: ä½¿ç”¨ `docker-compose ps` æŸ¥çœ‹ç‹€æ…‹ï¼Œä½¿ç”¨ `docker-compose logs [service]` æŸ¥çœ‹æ—¥èªŒã€‚

## ä¸‹ä¸€æ­¥è¡Œå‹•

1. âœ… **ç«‹å³åŸ·è¡Œ**ï¼šéƒ¨ç½²åŸºç¤è¨­æ–½ï¼ˆPostgreSQL + MinIOï¼‰
2. âš ï¸ **æº–å‚™ä»£ç¢¼**ï¼šå»ºç«‹æ‡‰ç”¨æœå‹™çš„åŸºæœ¬é…ç½®
3. ğŸ“‹ **é€æ­¥éƒ¨ç½²**ï¼šæº–å‚™å¥½ä¸€å€‹æœå‹™å°±éƒ¨ç½²ä¸€å€‹
